---
title: Selectors
---

## Conditions

Selectors are used to extract data from the Router pipeline for attaching to [spans](spans.mdx), [instruments](instruments.mdx) and [events](events.mdx) and are also used in [conditions](conditions.mdx).

The selectors available depend on the stage of the Router pipeline.

Here is an example of a selector on a custom span attribute:

```yaml title="router.yaml"
telemetry:
  spans:
    router:
      attributes:
        "my_attribute":
          # ...
          request_header: "x-my-header"
```
### Configuration reference
#### Router
This Router stage is the initial entrypoint for all requests. It is HTTP centric and deals with bytes.

| Selector           | Defaultable | Value                        | Description                          |
|--------------------|-------------|------------------------------|--------------------------------------|
| `trace_id`         | Yes         | `open_telemetry`\|`datadog`  | A header from the request            |
| `request_header`   | Yes         |                              | A header from the request            |
| `response_header`  | Yes         |                              | A header from the response           |
| `response_context` | Yes         |                              | A value from context                 |
| `baggage`          | Yes         |                              | A value from baggage                 |
| `env`              | Yes         |                              | A value from an environment variable |

#### Supergraph
The Supergraph stage is executed after query parse but before query execution. It is Graphql centric and deals with GraphQL queries and responses.

| Selector           | Defaultable | Value                                | Description                          |
|--------------------|-------------|--------------------------------------|--------------------------------------|
| `operation_name`   | Yes         |                                      | The operation name from the query    |
| `operation_kind`   | No          | `query`\|`mutation`\|`subscription`  | The operation kind from the query    |
| `query`            | Yes         | `query`\|`hash`                      | The graphql query                    |
| `query_variable`   | Yes         |                                      | The name of a graphql query variable |
| `response_body`    | Yes         |                                      | Json Path into the response body     |
| `request_header`   | Yes         |                                      | The name of the request header       |
| `response_header`  | Yes         |                                      | The name of the response header      |
| `request_context`  | Yes         |                                      | The request context key              |
| `response_context` | Yes         |                                      | The response context key             |
| `baggage`          | Yes         |                                      | The name of the baggage item         |
| `env`              | Yes         |                                      | The name of the environment variable |


#### Subgraph
The subgraph stage executed multiple times during query execution each representing a call to a single subgraph.
It is Graphql centric and deals with GraphQL queries and responses.

| Selector                    | Defaultable | Value                                | Description                                  |
|-----------------------------|-------------|--------------------------------------|----------------------------------------------|
| `subgraph_operation_name`   | Yes         |                                      | The operation name from the subgraph query   |
| `subgraph_operation_kind`   | No          | `query`\|`mutation`\|`subscription`  | The operation kind from the subgraph query   |
| `subgraph_query`            | Yes         |                                      | The graphql query to the subgraph            |
| `subgraph_query_variable`   | Yes         |                                      | The name of a subgraph query variable        |
| `subgraph_response_body`    | Yes         |                                      | Json Path into the subgraph response body    |
| `subgraph_request_header`   | Yes         |                                      | The name of the subgraph request header      |
| `subgraph_response_header`  | Yes         |                                      | The name of the subgraph response header     |
| `supergraph_operation_name` | Yes         |                                      | The operation name from the supergraph query |
| `supergraph_operation_kind` | Yes         | `query`\|`mutation`\|`subscription`  | The operation kind from the supergraph query |
| `supergraph_query`          | Yes         |                                      | The graphql query to the supergraph          |
| `supergraph_query_variable` | Yes         |                                      | The name of a supergraph query variable      |
| `request_context`           | Yes         |                                      | The request context key                      |
| `response_context`          | Yes         |                                      | The response context key                     |
| `baggage`                   | Yes         |                                      | The name of the baggage item                 |
| `env`                       | Yes         |                                      | The name of the environment variable         |
