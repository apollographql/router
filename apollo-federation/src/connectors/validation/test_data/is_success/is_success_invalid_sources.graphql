extend schema
  @link(url: "https://specs.apollo.dev/federation/v2.7", import: ["@key"])
  @link(url: "https://specs.apollo.dev/connect/v0.2", import: ["@connect", "@source"])
  @source(
    name: "bad_return_type"
    isSuccess: "$->echo('string, not bool')"
    http: {
      baseURL: "https://jsonplaceholder.typicode.com/"
    }
  )
  @source(
    name: "using_disallowed_var"
    isSuccess: "$request.headers.'x-my-header'->first->eq('eeeeep!')"
    http: {
      baseURL: "https://jsonplaceholder.typicode.com/"
    }
  )

type Query {
  users: [User]
    @connect(
      source: "using_disallowed_var"
      http: { GET: "/users" }
      selection: "id name"
    )

  posts: [Post]
    @connect(
      source: "bad_return_type"
      http: { GET: "/posts" }
      selection: "id title body"
    )
}

type User @key(fields: "id", resolvable: false) {
  id: ID!
  name: String
}

type Post {
  id: ID!
  title: String
  body: String
}