# A valid router configuration with every incompatible
# router feature turned on for testing warnings.

apq:
  subgraph:
    all:
      enabled: true
authentication:
  subgraph:
    all:
      aws_sig_v4:
        default_chain:
          profile_name: "my-test-profile"
          region: "us-east-1"
          service_name: "lambda"
          assume_role:
            role_arn: "test-arn"
            session_name: "test-session"
            external_id: "test-id"
batching:
  enabled: true
  mode: batch_http_link
  subgraph:
    all:
      enabled: false
    subgraphs:
      connectors:
        enabled: true
coprocessor:
  url: http://127.0.0.1:8081
  subgraph:
    all:
      request:
        headers: true
demand_control:
  enabled: true
  mode: measure
  strategy:
    static_estimated:
      list_size: 10
      max: 1000
headers:
  all:
    request:
      - propagate:
          matching: ^upstream-header-.*
      - remove:
          named: "x-legacy-account-id"
preview_entity_cache:
  enabled: true
  subgraph:
    all:
      enabled: true
rhai:
  scripts: "/rhai/scripts/directory"
telemetry:
  apollo:
    errors:
      subgraph:
        all:
          send: true
          redact: false
tls:
  subgraph:
    all:
      certificate_authorities: "${file./nonsense/path.crt}"
traffic_shaping:
  subgraphs:
    connectors:
      deduplicate_query: false
      compression: gzip
