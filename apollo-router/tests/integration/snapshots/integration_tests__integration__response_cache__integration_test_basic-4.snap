---
source: apollo-router/tests/integration/response_cache.rs
expression: response
---
{
  "data": {
    "topProducts": [
      {
        "name": "chair",
        "reviews": [
          {
            "body": "I can sit on it"
          }
        ]
      },
      {
        "name": "table",
        "reviews": [
          {
            "body": "I can sit on it"
          },
          {
            "body": "I can sit on it2"
          }
        ]
      },
      {
        "name": "plate",
        "reviews": [
          {
            "body": "I can sit on it"
          },
          {
            "body": "I can sit on it2"
          },
          {
            "body": "I can sit on it3"
          }
        ]
      }
    ]
  },
  "extensions": {
    "apolloCacheDebugging": {
      "version": "1.0",
      "data": [
        {
          "key": "version:1.0:subgraph:products:type:Query:hash:3ef0ac6d6bd5eee0eaef3e0485c803d51f63550bd9cbe4da120447592ead31e0:data:070af9367f9025bd796a1b7e0cd1335246f658aa4857c3a4d6284673b7d07fa6",
          "invalidationKeys": [],
          "kind": {
            "rootFields": [
              "topProducts"
            ]
          },
          "subgraphName": "products",
          "subgraphRequest": {
            "query": "{ topProducts(first: 2) { __typename upc name } }"
          },
          "source": "subgraph",
          "cacheControl": {
            "created": 0,
            "maxAge": 60,
            "public": true
          },
          "shouldStore": true,
          "data": {
            "data": {
              "topProducts": [
                {
                  "__typename": "Product",
                  "upc": "1",
                  "name": "chair"
                },
                {
                  "__typename": "Product",
                  "upc": "2",
                  "name": "table"
                },
                {
                  "__typename": "Product",
                  "upc": "3",
                  "name": "plate"
                }
              ]
            }
          },
          "warnings": [
            {
              "code": "NO_CACHE_TAG_ON_ROOT_FIELD",
              "links": [
                {
                  "url": "https://www.apollographql.com/docs/graphos/routing/performance/caching/response-caching/invalidation#invalidation-methods",
                  "title": "Add '@cacheTag' in your schema"
                }
              ],
              "message": "No cache tags are specified on your root fields query, if you want to use active invalidation you'll need to add cache tags on your root fields to actively invalidate cached data."
            }
          ]
        },
        {
          "key": "version:1.0:subgraph:reviews:type:Product:entity:052fa800fa760b2ac78669a5b0b90f512158eddab8d01eabb4e65b286ff09ecd:representation::hash:06a24c8b3861c95f53d224071ee9627ee81b4826d23bc3de69bdc0031edde6ed:data:070af9367f9025bd796a1b7e0cd1335246f658aa4857c3a4d6284673b7d07fa6",
          "invalidationKeys": [],
          "kind": {
            "typename": "Product",
            "entityKey": {
              "upc": "1"
            }
          },
          "subgraphName": "reviews",
          "subgraphRequest": {
            "query": "query($representations: [_Any!]!) { _entities(representations: $representations) { ... on Product { reviews { body } } } }",
            "variables": {
              "representations": []
            }
          },
          "source": "cache",
          "cacheControl": {
            "created": 0,
            "maxAge": 10,
            "public": true
          },
          "shouldStore": true,
          "data": {
            "data": {
              "reviews": [
                {
                  "body": "I can sit on it"
                }
              ]
            }
          },
          "warnings": [
            {
              "code": "CACHE_CONTROL_SMALL_MAX_AGE",
              "links": [
                {
                  "url": "https://www.apollographql.com/docs/graphos/routing/performance/caching/response-caching/observability",
                  "title": "Monitor with telemetry"
                },
                {
                  "url": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Cache-Control",
                  "title": "Cache-Control header documentation"
                }
              ],
              "message": "Your subgraph returns a 'Cache-Control' header with a small max-age (less than a minute) which could end up with less cache hits."
            }
          ]
        },
        {
          "key": "version:1.0:subgraph:reviews:type:Product:entity:2c6d8b73241e1bc016ddc35bff648f693687d3181d18815493a32f69614f6507:representation::hash:06a24c8b3861c95f53d224071ee9627ee81b4826d23bc3de69bdc0031edde6ed:data:070af9367f9025bd796a1b7e0cd1335246f658aa4857c3a4d6284673b7d07fa6",
          "invalidationKeys": [],
          "kind": {
            "typename": "Product",
            "entityKey": {
              "upc": "2"
            }
          },
          "subgraphName": "reviews",
          "subgraphRequest": {
            "query": "query($representations: [_Any!]!) { _entities(representations: $representations) { ... on Product { reviews { body } } } }",
            "variables": {
              "representations": []
            }
          },
          "source": "cache",
          "cacheControl": {
            "created": 0,
            "maxAge": 10,
            "public": true
          },
          "shouldStore": true,
          "data": {
            "data": {
              "reviews": [
                {
                  "body": "I can sit on it"
                },
                {
                  "body": "I can sit on it2"
                }
              ]
            }
          },
          "warnings": [
            {
              "code": "CACHE_CONTROL_SMALL_MAX_AGE",
              "links": [
                {
                  "url": "https://www.apollographql.com/docs/graphos/routing/performance/caching/response-caching/observability",
                  "title": "Monitor with telemetry"
                },
                {
                  "url": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Cache-Control",
                  "title": "Cache-Control header documentation"
                }
              ],
              "message": "Your subgraph returns a 'Cache-Control' header with a small max-age (less than a minute) which could end up with less cache hits."
            }
          ]
        },
        {
          "key": "version:1.0:subgraph:reviews:type:Product:entity:cf4952a1e511b1bf2561a6193b4cdfc95f265a79e5cae4fd3e46fd9e75bc512f:representation::hash:06a24c8b3861c95f53d224071ee9627ee81b4826d23bc3de69bdc0031edde6ed:data:070af9367f9025bd796a1b7e0cd1335246f658aa4857c3a4d6284673b7d07fa6",
          "invalidationKeys": [],
          "kind": {
            "typename": "Product",
            "entityKey": {
              "upc": "3"
            }
          },
          "subgraphName": "reviews",
          "subgraphRequest": {
            "query": "query($representations: [_Any!]!) { _entities(representations: $representations) { ... on Product { reviews { body } } } }",
            "variables": {
              "representations": []
            }
          },
          "source": "cache",
          "cacheControl": {
            "created": 0,
            "maxAge": 10,
            "public": true
          },
          "shouldStore": true,
          "data": {
            "data": {
              "reviews": [
                {
                  "body": "I can sit on it"
                },
                {
                  "body": "I can sit on it2"
                },
                {
                  "body": "I can sit on it3"
                }
              ]
            }
          },
          "warnings": [
            {
              "code": "CACHE_CONTROL_SMALL_MAX_AGE",
              "links": [
                {
                  "url": "https://www.apollographql.com/docs/graphos/routing/performance/caching/response-caching/observability",
                  "title": "Monitor with telemetry"
                },
                {
                  "url": "https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Cache-Control",
                  "title": "Cache-Control header documentation"
                }
              ],
              "message": "Your subgraph returns a 'Cache-Control' header with a small max-age (less than a minute) which could end up with less cache hits."
            }
          ]
        }
      ]
    }
  }
}
