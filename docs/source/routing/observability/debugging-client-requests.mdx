---
title: Debugging Client Requests to GraphOS Router
subtitle: Options for analyzing and debugging incoming requests
description: Learn how to use GraphOS router telemetry and GraphOS Insights to inspect and debug incoming HTTP client requests.
context:
  - telemetry
---

By default, the GraphOS Router operates without generating HTTP request logs or exporting telemetry metrics beyond what it sends to GraphOS.  This minimizes potentially high observability costs that can result from high request volumes.

If you need more data than what GraphOS provides by default, you can configure your router to collect and export additional telemetry.

## Using GraphOS Insights

GraphOS Studio lets you analyze data from failed requests, such as GraphQL error messages ([if enabled](/graphos/routing/graphos-reporting#errors)) and the ID of the client making the request. You can also [segment your insights data](/graphos/platform/insights/client-segmentation) based on the client ID.

<Tip>

[Learn how to ensure client IDs are included in all requests.](/graphos/routing/observability/client-id-enforcement)

</Tip>

## Enabling additional telemetry

Use the methods below if you need information outside of what's presented in GraphOS Studio to debug client requests.

<Note>

If you want to debug client requests in your own environment, Apollo recommends first doing so in a non-production environment or using logic to debug on a per-request basis.

</Note>

### Telemetry spans and traces

Once you enable [router telemetry](/graphos/routing/observability/telemetry), traces can have spans labeled `router`. These spans contain the HTTP information for a given client request via [OpenTelemetry standard attributes](/graphos/reference/router/telemetry/instrumentation/standard-attributes#router) such as `error.type` and `http.response.status_code`.

```yaml title="router.yaml"
telemetry:
  instrumentation:
    spans:
      router:
        attributes:
          http.response.status_code: true
          error.type: true
```

These attributes include helpful information about the request and response. Spans, however, don't include an attribute for the HTTP body text. If you want to see the GraphQL operation, first check your [GraphOS Insights](/graphos/platform/insights) or use the other options listed below.

### Request and response logging

You can include the request body in your telemetry by instrumenting [`events` in the supergraph service](/graphos/reference/router/telemetry/instrumentation/events#event-configuration) like so:

```yaml title="router.yaml"
telemetry:
  instrumentation:
    spans:
      default_attribute_requirement_level: recommended
      mode: spec_compliant
    events:
      supergraph:
        "req":
          message: "logged request"
          level: info
          on: "request"
          attributes:
            graphql.document: true       
```

### Debugging router logs

By default, the router uses the `info` level for its logging. [Enabling other logging levels](/graphos/reference/router/telemetry/log-exporters/overview) can help debug specific scenarios. Using non-`info` level configurations is only recommended for local or non-production environments.

### Rhai scripts and coprocessors

Hooking into the router service layer with either [Rhai scripts](/graphos/routing/customization/rhai) or [coprocessors](/graphos/routing/customization/coprocessor) gives you access to the full HTTP request before processing occurs. You can use either Rhai scripts or coprocessors to add custom logic for what to log and when.

See the Apollo Solutions ["Hello World" coprocessor](https://github.com/apollosolutions/example-coprocessor-helloworld) for an example of a coprocessor that simply logs the router's payload.

<SolutionsNote />

### Alternative cloud services

If you are deploying the router to a cloud service, you likely already have access to the raw HTTP logs through other services like load balancers. You should be able to find specific client request logs for a particular operation using the operation hash or trace ID. Refer to the docs for your cloud providers for more information.

Popular cloud provider links are provided below.

#### Amazon Web Services

- [AWS CloudWatch Logs](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html)
- [AWS Elastic Load Balancer](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-access-logs.html)

#### Google Cloud Platform

- [Google Cloud Observability](https://cloud.google.com/logging/docs/log-analytics)
- [Google Cloud Load Balancing](https://cloud.google.com/load-balancing/docs/l7-internal/monitoring)

#### Microsoft Azure

- [Azure App Service Logging](https://learn.microsoft.com/en-us/azure/app-service/troubleshoot-diagnostic-logs)
- [Azure Load Balancer](https://learn.microsoft.com/en-us/azure/load-balancer/monitor-load-balancer)
