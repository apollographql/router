---
title: Response caching TTLs for the GraphOS Router
description: Response caching TTLs for GraphOS Router with GraphOS Enterprise.
minVersion: Router v2.8.0
releaseStage: preview
---

## Configure time to live (TTL)

Besides configuring a global TTL for all the entries in Redis, the GraphOS Router also honors the [`Cache-Control` header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control) returned with the subgraph response. It generates a `Cache-Control` header for the client response by aggregating the TTL information from all response parts.
A TTL must be configured for all subgraphs using response caching. This can be defined in the per-subgraph configuration or inherited from the global configuration. This TTL is used if the subgraph returns a <code>Cache-Control</code> header without a <code>max-age</code>.

If you're using Apollo Server for your subgraph, you can use the [<code>@CacheControl</code> directive](https://www.apollographql.com/docs/apollo-server/api/plugin/cache-control), which is available via the <code>ApolloServerPluginCacheControl</code> plugin. This plugin lets you mark data in your subgraph schema to set a custom TTL, which is then translated into a <code>Cache-Control</code> header.

Here is an example of schema using both `@cacheTag` and `@cacheControl` directives:

```graphql
extend schema
  @link(
    url: "https://specs.apollo.dev/federation/v2.12"
    import: ["@key", "@requires", "@external", "@cacheTag"]
  )

enum CacheControlScope {
  PUBLIC
  PRIVATE
}
directive @cacheControl(
  maxAge: Int
  scope: CacheControlScope
  inheritMaxAge: Boolean
) on FIELD_DEFINITION | OBJECT | INTERFACE | UNION

type Query {
  user(id: ID!): User
  users: [User!]!
}

type User @key(fields: "id") @cacheTag(format: "user-{$key.id}") @cacheControl(maxAge: 10) {
  id: ID!
  name: String!
  email: String!
  posts: [Post!]! @external
}

type Post @key(fields: "id") {
  id: ID!
  content: String! @external
}
```

In this example you'll have the type `User` with a TTL set to 10 seconds and a cache tag set to `user-42` if user id is `42`.
