subgraphs:
  connectors:
    routing_url: http://none
    schema:
      sdl: |
        extend schema
          @link(url: "https://specs.apollo.dev/federation/v2.11")
          @link(url: "https://specs.apollo.dev/connect/v0.2", import: ["@source", "@connect"])
          @source(
            name: "json"
            http: {
              host: "$$config.host"
              port: "$$config.port"
              path: "$(['api', 'v1'])"
              query: "q: $(1)"
            }
          )

        type Query {
          f(req: String!, opt: String, repeated: [Int]): String
            @connect(
              source: "json"
              http: {
                GET: "/users"
                path: "$([$$args.req, $$args.opt])"
                query: "repeated: $$args.repeated"
              }
              selection: "$"
            )
        }
