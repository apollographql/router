---
title: Deploying GraphOS Router on Railway
subtitle: Deploy router with Railway's managed hosting
description: Deploy Apollo GraphOS Router or Apollo Router Core to Railway using their managed hosting platform.
---

In this guide, you will deploy the GraphOS Router using the [Railway](https://railway.com/) template.

## Prerequisites

You will need:

- [A GraphQL API set up in GraphOS](/graphos/get-started/guides/graphql#step-1-set-up-your-graphql-api). You will need your graph credentials: `APOLLO_KEY` and `APOLLO_GRAPH_REF`.
- A [Railway account](https://railway.com/)
- A [GitHub account](https://github.com/)

## Option 1: Quick deployment with template (Recommended)

The fastest way to deploy the Apollo Router on Railway is using the official template:

1. Deploy using the template:
    <a href="https://railway.com/deploy/apollo-router">
      <img src="https://railway.app/button.svg" alt="Deploy to Railway" width="200px"/>
    </a>

1. Configure your deployment:
   - **Template Name**: Enter a name for your deployment
   - **Repository Name**: Choose a name for the forked repository

1. Set environment variables:
   - `APOLLO_KEY`: Your Graph API key from GraphOS Studio
   - `APOLLO_GRAPH_REF`: Your graph reference, e.g. `my-graph@production`
   - Railway automatically sets the `PORT` variable to the correct value

1. Click **Deploy** to start the deployment.

1. After the deployment finishes, visit your service URL to confirm the router is running. Railway provides a public URL for your service.

## Option 2: Custom deployment

If you need more control over your deployment, you can set up a custom deployment using the [Apollo Runtime container](/graphos/routing/self-hosted/containerization/docker).

After following the steps in the [Docker](/graphos/routing/self-hosted/containerization/docker) guide, you can deploy your router to Railway using the following steps:

1. Fork the [router-template](https://github.com/apollographql/router-template) repository.

1. (Optional) Create a `router.yaml` configuration file for custom settings:
    
    ```yaml title="router.yaml"
    # The Apollo Runtime container comes with sensible defaults
    # Only create this file if you need custom configuration
    supergraph:
      listen: 0.0.0.0:4000
    health_check:
      listen: 0.0.0.0:8088
    cors:
      # Development setting - replace for production
      allow_any_origin: true
    ```

1. Create a `Dockerfile`:

    ```dockerfile
    # Use the official Apollo Runtime container image as the base
    FROM ghcr.io/apollographql/apollo-runtime:0.0.14_router2.5.0_mcp-server0.7.0

    # Optionally copy custom router configuration
    # COPY router.yaml /config/router_config.yaml
    ```

1. Connect your repository:
   - In your Railway dashboard, click **New Project**
   - Select **Deploy from GitHub repo**
   - Connect and authorize your GitHub repository

1. Railway automatically configures the service:
   - Railway detects your Dockerfile and configures the service
   - The build and deployment process starts automatically

1. Set environment variables:
   - In your project dashboard, go to the **Variables** tab
   - Add `APOLLO_KEY` and set it to your Graph API key
   - Add `APOLLO_GRAPH_REF` and set it to your graph reference
   - Railway automatically provides the `PORT` variable

1. Railway automatically redeploys your service when environment variables are added.
