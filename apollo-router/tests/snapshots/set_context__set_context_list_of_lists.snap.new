---
source: apollo-router/tests/set_context.rs
assertion_line: 152
expression: response
---
{
  "data": {
    "tList": [
      {
        "id": "1",
        "uList": [
          null
        ]
      },
      {
        "id": "2",
        "uList": [
          null
        ]
      }
    ]
  },
  "errors": [
    {
      "message": "couldn't find mock for query {\"query\":\"query QueryLL__Subgraph1__1($representations:[_Any!]!$contextualArgument_1_0:String){_entities(representations:$representations){...on U{field(a:$contextualArgument_1_0)}}}\",\"operationName\":\"QueryLL__Subgraph1__1\",\"variables\":{\"contextualArgument_1_0_0\":\"prop value 1\",\"contextualArgument_1_0_1\":\"prop value 2\",\"representations\":[{\"__typename\":\"U\",\"id\":\"3\"},{\"__typename\":\"U\",\"id\":\"4\"}]}}",
      "extensions": {
        "code": "FETCH_ERROR"
      }
    }
  ],
  "extensions": {
    "valueCompletion": [
      {
        "message": "Cannot return null for non-nullable field U.field",
        "path": [
          "tList",
          0,
          "uList",
          0
        ]
      },
      {
        "message": "Cannot return null for non-nullable field U.field",
        "path": [
          "tList",
          1,
          "uList",
          0
        ]
      }
    ],
    "apolloQueryPlan": {
      "object": {
        "kind": "QueryPlan",
        "node": {
          "kind": "Sequence",
          "nodes": [
            {
              "kind": "Fetch",
              "serviceName": "Subgraph1",
              "variableUsages": [],
              "operation": "query QueryLL__Subgraph1__0{tList{__typename prop id uList{__typename id}}}",
              "operationName": "QueryLL__Subgraph1__0",
              "operationKind": "query",
              "id": null,
              "inputRewrites": null,
              "outputRewrites": null,
              "contextRewrites": null,
              "schemaAwareHash": "babf88ea82c1330e535966572a55b03a2934097cd1cf905303b86ae7c197ccaf",
              "authorization": {
                "is_authenticated": false,
                "scopes": [],
                "policies": []
              }
            },
            {
              "kind": "Flatten",
              "path": [
                "",
                "tList",
                "@",
                "uList",
                "@"
              ],
              "node": {
                "kind": "Fetch",
                "serviceName": "Subgraph1",
                "requires": [
                  {
                    "kind": "InlineFragment",
                    "typeCondition": "U",
                    "selections": [
                      {
                        "kind": "Field",
                        "name": "__typename"
                      },
                      {
                        "kind": "Field",
                        "name": "id"
                      }
                    ]
                  }
                ],
                "variableUsages": [
                  "contextualArgument_1_0"
                ],
                "operation": "query QueryLL__Subgraph1__1($representations:[_Any!]!$contextualArgument_1_0:String){_entities(representations:$representations){...on U{field(a:$contextualArgument_1_0)}}}",
                "operationName": "QueryLL__Subgraph1__1",
                "operationKind": "query",
                "id": null,
                "inputRewrites": null,
                "outputRewrites": null,
                "contextRewrites": [
                  {
                    "kind": "KeyRenamer",
                    "path": [
                      "..",
                      "... on T",
                      "prop"
                    ],
                    "renameKeyTo": "contextualArgument_1_0"
                  }
                ],
                "schemaAwareHash": "a9b24549250c12e38c398c32e9218134fab000be3b934ebc6bb38ea096343646",
                "authorization": {
                  "is_authenticated": false,
                  "scopes": [],
                  "policies": []
                }
              }
            }
          ]
        }
      },
      "text": "QueryPlan {\n  Sequence {\n    Fetch(service: \"Subgraph1\") {\n      {\n        tList {\n          __typename\n          prop\n          id\n          uList {\n            __typename\n            id\n          }\n        }\n      }\n    },\n    Flatten(path: \".tList.@.uList.@\") {\n      Fetch(service: \"Subgraph1\") {\n        {\n          ... on U {\n            __typename\n            id\n          }\n        } =>\n        {\n          ... on U {\n            field(a: $contextualArgument_1_0)\n          }\n        }\n      },\n    },\n  },\n}"
    }
  }
}
