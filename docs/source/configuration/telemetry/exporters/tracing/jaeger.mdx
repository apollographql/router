---
title: Export traces to Jaeger
description: Collect and export tracing information from the Apollo Router
---

Enable and configure the [Jaeger](https://www.jaegertracing.io/) exporter endpoint in the Apollo Router.
For general tracing configuration, refer to [Router Tracing Configuration](./overview).

## OTLP configuration

Since Jaeger v1.35.0, [Jaeger supports native OTLP ingestion](https://medium.com/jaegertracing/introducing-native-support-for-opentelemetry-in-jaeger-eb661be8183c) and it's the preferred way to send traces to Jaeger.

When running Jaeger with Docker, make sure that port **4317** is exposed and that `COLLECTOR_OTLP_ENABLED` is set to `true`. For example:

```bash
docker run --name jaeger \
  -e COLLECTOR_OTLP_ENABLED=true \
  -p 16686:16686 \
  -p 4317:4317 \
  -p 4318:4318 \
  jaegertracing/all-in-one:1.35
```

To configure the router to send traces via OTLP, set the Jaeger endpoint with port 4317. For example:

```yaml title="router.yaml"
telemetry:
  exporters:
     tracing:
       otlp:
         enabled: true
   
         # Optional endpoint, either 'default' or a URL (Defaults to http://127.0.0.1:4317)
         endpoint: "http://${env.JAEGER_HOST}:4317"
```

## Native configuration

<Caution>

[Native Jaegar tracing is deprecated](https://opentelemetry.io/blog/2022/jaeger-native-otlp/) and will be removed in a future release of the Apollo Router. Use [Jaeger via OTLP](#otlp-configuration) instead.

</Caution>

The Apollo Router can be configured to export tracing data to Jaeger either via an agent or HTTP collector.

Unless explicitly configured to use a collector, Jaeger will use an agent by default.

### Configure Jaeger agent

```yaml title="router.yaml"
telemetry:
  exporters:
     tracing:
       jaeger:
         enabled: true
         # Optional agent configuration,
         agent:
           # Optional endpoint, either 'default' or a socket address (Defaults to 127.0.0.1:6832)
           endpoint: "${env.JAEGER_HOST}:6832"  
```

### Configure Jaeger collector

```yaml title="router.yaml"
telemetry:
  exporters:
     tracing:
       jaeger:
         enabled: true
         # Optional collector configuration,
         collector:
           # Optional endpoint, either 'default' or a URL (Defaults to http://127.0.0.1:14268/api/traces)
           endpoint: "http://${env.JAEGER_HOST}:14268/api/traces"
           username: "${env.JAEGER_USERNAME}"
           password: "${env.JAEGER_PASSWORD}"
```
